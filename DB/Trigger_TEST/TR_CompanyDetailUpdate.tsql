set ANSI_NULLS ON
set QUOTED_IDENTIFIER ON
GO
-- TB_CompanyDetail 테이블에 Update 시 TB_RecruitSearch 테이블에 필요 Data Update 해주는 Trigger 세팅
ALTER TRIGGER [dbo].[TR_CompanyDetailUpdate] ON [dbo].[TB_CompanyDetail]
FOR UPDATE
AS

DECLARE  @CompanyNo INT
,	@KRName NVARCHAR(50)
,	@CNName NVARCHAR(50)
,	@ENGName NVARCHAR(50)
,	@CompanyImage NVARCHAR(200)
,	@CapitalType TINYINT

SELECT
	@CompanyNo = CompanyNo
,	@KRName = KRName
,	@CNName = CNName
,	@ENGName = ENGName
,	@CompanyImage = CompanyImage
,	@CapitalType = CapitalType
FROM
	INSERTED

IF EXISTS (SELECT CompanyNo FROM dbo.TB_RecruitSearch WITH(NOLOCK) WHERE CompanyNo = @CompanyNo )
BEGIN

	UPDATE
		dbo.TB_RecruitSearch
	SET
		KRName = IsNull( @KRName, KRName )
	,	CNName = IsNull( @CNName, CNName )
	,	ENGName = IsNull( @ENGName, ENGName )
	,	CompanyImage = IsNull( @CompanyImage, CompanyImage )
	,	CapitalType = IsNull( @CapitalType, CapitalType )
	WHERE
		CompanyNo = @CompanyNo

END



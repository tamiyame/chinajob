set ANSI_NULLS ON
set QUOTED_IDENTIFIER ON
go


-- TB_Recruit 테이블에 Insert 시 TB_RecruitSearch 테이블에 필요 Data Insert 해주는 Trigger 세팅
ALTER TRIGGER [TR_RecruitMasterUpdate] ON [dbo].[TB_RecruitMaster]
FOR UPDATE
AS


DECLARE @CompanyNo INT
DECLARE @RecruitNo INT
DECLARE @Status INT

SELECT
	@CompanyNo = CompanyNo
,	@RecruitNo = RecruitNo
,	@Status = Status
FROM
	INSERTED

IF ( @Status = 0 )
BEGIN
	DELETE
		dbo.TB_RecruitSearch
	WHERE
		CompanyNo = @CompanyNo
	AND	RecruitNo = @RecruitNo
END


